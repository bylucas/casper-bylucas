$(function($){function e(){u=window.scrollY,i()}function n(){v=window.innerHeight,f=c.height(),i()}function i(){d||requestAnimationFrame(o),d=!0}function t(e){var n=/(?:page\/)(\d)(?:\/)$/i;return e=e.replace(/#(.*)$/g,"").replace("////g","/"),e.match(n)&&(r=parseInt(e.match(n)[1]),e=e.replace(n,"")),e}function o(){if(a=t(a),!w){if(u+v<=f-l)return void(d=!1);if(r>=maxPages)return window.removeEventListener("scroll",e,{passive:!0}),void window.removeEventListener("resize",n);w=!0,r+=1;var i=a+"page/"+r+"/";$.get(i,function(e){var n=document.createRange().createContextualFragment(e),i=n.querySelectorAll(".post");i.length&&[].forEach.call(i,function(e){s[0].appendChild(e)})}).fail(function(i){404===i.status&&(window.removeEventListener("scroll",e,{passive:!0}),window.removeEventListener("resize",n))}).always(function(){f=c.height(),w=!1,d=!1})}}var r=1,a=window.location.pathname,c=$(document),s=$(".post-feed"),l=300,d=!1,w=!1,u=window.scrollY,v=window.innerHeight,f=c.height();window.addEventListener("scroll",e,{passive:!0}),window.addEventListener("resize",n),o()});